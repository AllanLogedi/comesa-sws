<form role="form" enctype="multipart/form-data"  role="form" [formGroup]="premisesGeneraldetailsfrm">
    <div class="row  wizard-content wizard-contentfieldset">
        <fieldset class="col-lg-12 row">
            <legend  class="contentfieldset">{{'premises_information' | translate}}</legend>
            <div class="col-lg-4" >
              <label>{{'product_type_selection' | translate}}</label>
        
              <dx-select-box  [dataSource]="productTypesData" valueExpr="id" displayExpr="name" placeholder="{{'select_product_type_selection' | translate}}" (onValueChanged)="onSectionsCboSelect($event)" [searchEnabled]="true" formControlName="regulated_productstype_id">
              </dx-select-box>
          </div>
        
          <div class="col-lg-4">
            <label class="control-label">{{'premises_name' | translate}}</label>
            <dx-text-box formControlName="premises_name"  [readOnly]= "is_readonly" placeholder="{{'premises_name' | translate}}" [readOnly]="is_readonly"  [showClearButton]="true">
            </dx-text-box>
        </div>
        <div class="col-lg-4">
          <label>{{'premises_business_type' | translate}}</label>
          <dx-select-box (onValueChanged)="onBusinesTypeCboSelect($event)" [dataSource]="businessTypesData" valueExpr="id" displayExpr="name" placeholder="{{'select_premises_main_activity' | translate}}" [searchEnabled]="true"  formControlName="business_type_id">
          </dx-select-box>
        </div>
        <div class="col-lg-4">
            <label class="control-label">{{'business_registration_no' | translate}}</label>
            <dx-text-box formControlName="business_registration_no"  [readOnly]= "is_readonly" placeholder="{{'business_registration_no' | translate}}" [showClearButton]="true">
            </dx-text-box>
        </div>
            <div class="col-lg-8  input-group ">
              <div class="col-lg-8">
                  <label for="ti" class="control-label">{{'capital_information' | translate}}</label>
                  <dx-text-box formControlName="investment_capital" placeholder="{{'investment_capital' | translate}}"  [showClearButton]="true">
                  </dx-text-box>
              </div>
  
              <div class="col-lg-4">
                <label class="control-label">{{'currency' | translate}}</label>
                <dx-select-box [readOnly]="is_readonly" [dataSource]="payingCurrencyData" valueExpr="id" displayExpr="description" placeholder="{{'select_currency' | translate}}" [searchEnabled]="true" formControlName="paying_currency_id">
                </dx-select-box>
  
            </div>
        </div>
        <div class="col-lg-4">
            <label for="ti" class="control-label">{{'official_email_address' | translate}}</label>
            <dx-text-box [readOnly]="is_readonly" formControlName="official_email_address" placeholder="{{'email_address' | translate}}" [showClearButton]="true">
            </dx-text-box>
        </div>
        
        <div class="col-lg-4">
            <label for="ti" class="control-label">{{'official_telephone_no' | translate}}</label>
            <dx-text-box formControlName="official_telephone_no" placeholder="{{'official_telephone_no' | translate}}" [showClearButton]="true">
            </dx-text-box>
        </div>
      
        <div class="col-lg-4">
          <label for="ti" class="control-label">{{'application_processing_place' | translate}}</label>
  
          <dx-select-box [dataSource]="zoneData" valueExpr="id" placeholder="{{'application_processing_place' | translate}}" displayExpr="name" [searchEnabled]="true" formControlName="zone_id">
          </dx-select-box>
      </div>
        </fieldset>  
        <fieldset class="col-lg-12 row">
          <legend  class="contentfieldset">{{'director_information' | translate}}</legend>
            <div class="col-lg-4">
              <label class="control-label">{{'name_of_managing_director' | translate}}</label>
              <dx-text-box formControlName="managing_director"  [readOnly]= "is_readonly" placeholder="{{'name_of_managing_director' | translate}}" [readOnly]="is_readonly"  [showClearButton]="true">
              </dx-text-box>
          </div>
            <div class="col-lg-4">
              <label class="control-label">{{'managing_director_email' | translate}}</label>
              <dx-text-box formControlName="managing_director_email"  [readOnly]= "is_readonly" placeholder="{{'director_email' | translate}}" [readOnly]="is_readonly"  [showClearButton]="true">
              </dx-text-box>
          </div>
          <div class="col-lg-4">
              <label class="control-label">{{'managing_director_telepone_no' | translate}}</label>
              <dx-text-box formControlName="managing_director_telephone"  [readOnly]= "is_readonly" placeholder="{{'director_telepone_no' | translate}}" [readOnly]="is_readonly"  [showClearButton]="true">
              </dx-text-box>
          </div>
          <div class="col-lg-4" >
            <label class="control-label">{{'director_as_primary_contact_person' | translate}}</label>
            <dx-select-box (onSelectionChanged)="onTraderasContactpersnChange($event)"  [dataSource]="confirmDataParam" valueExpr="id" displayExpr="name" [searchEnabled]="true"
             placeholder="{{'director_as_primary_contact_person' | translate}}" formControlName="applicant_contact_person" [showClearButton]="true">
            </dx-select-box>
          </div>
          <div class="col-lg-4" *ngIf="!isReadOnlyTraderasContact">
            <label class="control-label">{{'contact_person' | translate}}</label>
            <dx-text-box formControlName="contact_person"  [readOnly]= "is_readonly" placeholder="{{'contact_person' | translate}}" [readOnly]="is_readonly"  [showClearButton]="true">
            </dx-text-box>
        </div>
          <div class="col-lg-4" *ngIf="!isReadOnlyTraderasContact">
            <label class="control-label">{{'contact_person_email' | translate}}</label>
            <dx-text-box formControlName="contact_person_email"  [readOnly]= "is_readonly" placeholder="{{'contact_person_email' | translate}}" [readOnly]="is_readonly"  [showClearButton]="true">
            </dx-text-box>
        </div>
        <div class="col-lg-4" *ngIf="!isReadOnlyTraderasContact">
            <label class="control-label">{{'contact_person_telephone' | translate}}</label>
            <dx-text-box formControlName="contact_person_telephone"  [readOnly]= "is_readonly" placeholder="{{'contact_person_telephone' | translate}}" [readOnly]="is_readonly"  [showClearButton]="true">
            </dx-text-box>
        </div>
        <div class="col-lg-4" *ngIf="!isReadOnlyTraderasContact">
          <label class="control-label">{{'contact_person_position' | translate}}</label>
          <dx-text-box formControlName="contact_person_position"  [readOnly]= "is_readonly" placeholder="{{'contact_person_position' | translate}}" [readOnly]="is_readonly"  [showClearButton]="true">
          </dx-text-box>
      </div>
          
        </fieldset>    
        <fieldset class="col-lg-12 row">
          <legend  class="contentfieldset">{{'physical_location_information' | translate}}</legend>
          <div class="col-lg-4">
            <label class="control-label">{{'country' | translate}}</label>
  
            <dx-select-box [readOnly]="is_readonly" [dataSource]="countries" valueExpr="id" displayExpr="name" placeholder="{{'select_country' | translate}}" (onSelectionChanged)="onCoutryCboSelect($event)" [searchEnabled]="true" formControlName="country_id">
            </dx-select-box>
  
        </div>
        <div class="col-lg-4">
            <label for="ti" class="control-label">{{'province' | translate}}</label>
  
            <dx-select-box [readOnly]="is_readonly" [dataSource]="regions" valueExpr="id" displayExpr="name" (onSelectionChanged)="onRegionsCboSelect($event)" [searchEnabled]="true" formControlName="region_id">
            </dx-select-box>
        </div>
        <div class="col-lg-4">
            <label for="ti" class="control-label">{{'district' | translate}}</label>
  
            <dx-select-box [dataSource]="districts" valueExpr="id" placeholder="{{'select_district' | translate}}" displayExpr="name" [searchEnabled]="true" formControlName="district_id" (onSelectionChanged)="oDistrictsCboSelect($event)" >
            </dx-select-box>
        </div>
        <!-- <div class="col-lg-4">
            <label for="ti" class="control-label">{{'sector' | translate}}</label>
            <dx-select-box [dataSource]="sectorsData" valueExpr="id" placeholder="{{'select_sector' | translate}}" displayExpr="name" [searchEnabled]="true" formControlName="sector_id" (onSelectionChanged)="oSectorsCboSelect($event)" >
            </dx-select-box>
        </div>
        <div class="col-lg-4">
            <label for="ti" class="control-label">{{'cell' | translate}}</label>
            <dx-select-box [dataSource]="cellsData" valueExpr="id" placeholder="{{'select_cell' | translate}}" displayExpr="name" [searchEnabled]="true" formControlName="cell_id">
            </dx-select-box>
        </div> -->
        <div class="col-lg-4">
          <label for="ti" class="control-label">{{'village' | translate}}</label>
          <dx-text-box  formControlName="village" placeholder="{{'enter_village' | translate}}" [showClearButton]="true">  </dx-text-box>
        </div>
        
        <div class="col-lg-4">
            <label class="control-label">{{'physical_address' | translate}}</label>
  
            <dx-text-box  formControlName="physical_address"  [showClearButton]="true" placeholder="{{'physical_address' | translate}}">
            </dx-text-box>
        </div>
        <div class="col-lg-8 row form-group">
            <label class="control-label col-lg-12">{{'geolocation' | translate}}</label>
            <div class="col-lg-6">
                <dx-text-box formControlName="latitude" placeholder="{{'latitude' | translate}}" [showClearButton]="true">
                </dx-text-box>
            </div>
            <div class="col-lg-6">
  
                <dx-text-box formControlName="longitude" placeholder="{{'longitude' | translate}}" [showClearButton]="true">
                </dx-text-box>
            </div>
  
        </div>
        </fieldset>       
      
            <div class="col-lg-12">
                <input type="hidden" value={{regulatory_subfunction_id}} formControlName="regulatory_subfunction_id" />
                <input type="hidden" value={{regulatory_function_id}} formControlName="regulatory_function_id" />
                <input type="hidden" value={{application_code}} formControlName="application_code" />
                <input type="hidden" value={{tra_premise_id}} formControlName="tra_premise_id" />
                <input type="hidden" value={{registered_id}} formControlName="registered_id" />
            </div>
     </div>
  </form>
  
  <dx-popup class="popup"  [width]="funcpopWidth(45)" [showTitle]="true" title="{{'premises_personnel' | translate}}" [dragEnabled]="false" [hideOnOutsideClick]="false"
  [(visible)]="isPersonnelPopupVisible">
  
  <div *dxTemplate="let data of 'content'" class="row">
    <dx-data-grid [dataSource]="personnel_informationData" height=500 
      [showBorders]="true">
      <dxi-column dataField="name" caption="{{'name' | translate}}"></dxi-column>
  
      <dxi-column dataField="postal_address" caption="{{'postal_address' | translate}}"></dxi-column>
      <dxi-column dataField="telephone_no" caption="{{'telephone_no' | translate}}"></dxi-column>
      <dxi-column dataField="email_address" caption="{{'email_address' | translate}}"></dxi-column>
  
      <dxi-column [width]="60" caption="{{'Action' | translate}}" name="command-editing" [allowFiltering]="false" [allowSorting]="false"
        cellTemplate="cellTemplate">
        <div *dxTemplate="let data of 'cellTemplate'">
          <a style="cursor: pointer;" (click)="funcSelectPremisePersonnel(data)"><i class="fa fa-edit"></i>{{'select_personnel' | translate}}</a>&nbsp;
        </div>
      </dxi-column>
      <dxo-filter-row [visible]="true"></dxo-filter-row>
      <dxo-paging [enabled]="true">
      </dxo-paging>
      <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
      </dxo-pager>
      <dxo-export [enabled]="true" fileName="dtpremDocumentsUploadData" [allowExportSelectedData]="true"></dxo-export>
  
    </dx-data-grid>
  </div>
  </dx-popup>
  
  <dx-popup class="popup"  [width]="funcpopWidth(50)" [height]="'auto'" [showTitle]="true" title="{{'personnel_information' | translate}}"
  [dragEnabled]="false" [hideOnOutsideClick]="false" [(visible)]="isaddNewPremisesPersonnelDetails">
  <div *dxTemplate="let data of 'content'">
  <div class="col-lg-12">
    <form enctype="multipart/form-data" role="form" [formGroup]="newPremisesPersonnelDetailsFrm"
      (ngSubmit)="onSaveNewPremisesPersonnelDetails()">
  
      <div class="row">
  
        <div class="col-xs-12 col-md-12 col-lg-12 col-xl-12">
  
          <label class="control-label">{{'name' | translate}}</label>
          <dx-text-box formControlName="name" placeholder="{{'name' | translate}}">
          </dx-text-box>
  
        </div>
       
        <div class="col-xs-12 col-md-12 col-lg-12 col-xl-12">
          <label for="ti" class="control-label">{{'email_address' | translate}}</label>
          <dx-text-box formControlName="email_address" placeholder="{{'email_address' | translate}}">
          </dx-text-box>
        </div>
        <div class="col-xs-12 col-md-12 col-lg-12 col-xl-12">
          <label for="ti" class="control-label">{{'postal_address' | translate}}</label>
          <dx-text-box formControlName="postal_address" placeholder="{{'postal_address' | translate}}">
          </dx-text-box>
        </div>
        <div class="col-xs-12 col-md-12 col-lg-12 col-xl-12">
          <label for="ti" class="control-label">{{'telephone_no' | translate}}</label>
  
          <dx-text-box formControlName="telephone_no" placeholder="{{'telephone_no' | translate}}">
          </dx-text-box>
        </div>
        <div class="col-lg-12 btn-margin-5">
          <br />
          <button type="submit" (submit)="onSaveNewPremisesPersonnelDetails()" [disabled]="!newPremisesPersonnelDetailsFrm.valid"
            class="btn btn-primary"><i class="fa fa-user"></i>{{'save_personnel_details' | translate}}</button>
        </div>
      </div>
    </form>
  </div>
  </div>
  </dx-popup>